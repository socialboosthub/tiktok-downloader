<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>TikTok Downloader</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      padding: 20px;
      margin: 0;
    }

    .tab-container {
      display: flex;
      gap: 8px;
      margin-bottom: 15px;
    }

    .filter-button {
      flex: 1;
      padding: 10px 0;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      color: white;
      font-size: 12px;
      font-weight: bold;
      background: linear-gradient(to bottom, #EE1D52 50%, #25F4EE 50%);
      background-size: 100% 200%;
      background-position: top;
      transition: background-position 0.4s ease;
    }

    .filter-button.selected {
      background-position: bottom;
      color: #000;
      box-shadow: inset 0 0 0 2px rgba(255,255,255,0.9);
    }

    .gradient-box {
      background: linear-gradient(to bottom, #EE1D52, #25F4EE);
      padding: 20px;
      border-radius: 12px;
      text-align: center;
      color: white;
      max-width: 500px;
      margin: 0 auto;
    }

    .gradient-box h1 {
      font-size: 22px;
      margin-bottom: 10px;
    }

    .gradient-box p {
      font-size: 14px;
      margin-bottom: 20px;
    }

    .input-box {
      display: flex;
      gap: 8px;
      padding: 10px;
      background: white;
      border-radius: 8px;
      margin-bottom: 15px;
    }

    .input-box input,
    .input-box textarea {
      flex: 1;
      border: none;
      outline: none;
      font-size: 16px;
    }

    .input-box textarea {
      height: 100px;
      resize: none;
      display: none;
    }

    .action-btn {
      background: #25F4EE;
      border: none;
      padding: 8px 12px;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
    }

    #clear-btn { display: none; }

    .process-btn {
      width: 100%;
      height: 50px;
      background: black;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: bold;
      display: none;
    }

    .process-btn.active { display: block; }
  </style>
</head>

<body>

<div style="max-width:500px;margin:auto">

  <div class="tab-container">
    <button class="filter-button selected" onclick="switchTab(0)">Video</button>
    <button class="filter-button" onclick="switchTab(1)">Profile</button>
    <button class="filter-button" onclick="switchTab(2)">Story</button>
    <button class="filter-button" onclick="switchTab(3)">Slider</button>
    <button class="filter-button" onclick="switchTab(4)">Multi</button>
  </div>

  <div class="gradient-box">
    <h1 id="page-title">Download TikTok Videos</h1>
    <p id="page-desc">Paste any TikTok video link below</p>

    <div class="input-box">
      <input id="main-input" placeholder="Paste TikTok video link" oninput="toggleBtns()">
      <textarea id="multi-input" placeholder="Paste links (one per line)" oninput="toggleBtns()"></textarea>

      <button class="action-btn" id="paste-btn" onclick="paste()">Paste</button>
      <button class="action-btn" id="clear-btn" onclick="clearInput()">Clear</button>
    </div>

    <button class="process-btn active" id="p0" onclick="go('video-download.html')">Process Video</button>
    <button class="process-btn" id="p1" onclick="go('profile.html')">Process Profile</button>
    <button class="process-btn" id="p2">Process Story</button>
    <button class="process-btn" id="p3">Process Slider</button>
    <button class="process-btn" id="p4" onclick="go('download.html')">Process Multi</button>
  </div>

</div>

<script>
let activeTab = 0;

const titles = [
  "Download TikTok Videos",
  "TikTok Profile Downloader",
  "TikTok Story Saver",
  "TikTok Slider Downloader",
  "TikTok Multi Downloader"
];

const descs = [
  "Paste any TikTok video link below",
  "Paste a TikTok profile link or username",
  "Paste TikTok story link",
  "Paste TikTok slider link",
  "Paste multiple TikTok links"
];

function switchTab(i) {
  activeTab = i;

  document.querySelectorAll(".filter-button").forEach((b, x) =>
    b.classList.toggle("selected", x === i)
  );

  document.querySelectorAll(".process-btn").forEach((b, x) =>
    b.classList.toggle("active", x === i)
  );

  document.getElementById("page-title").innerText = titles[i];
  document.getElementById("page-desc").innerText = descs[i];

  document.getElementById("main-input").style.display = i === 4 ? "none" : "block";
  document.getElementById("multi-input").style.display = i === 4 ? "block" : "none";

  clearInput();
}

function toggleBtns() {
  const val = getInput().value;
  document.getElementById("paste-btn").style.display = val ? "none" : "block";
  document.getElementById("clear-btn").style.display = val ? "block" : "none";
}

function getInput() {
  return activeTab === 4
    ? document.getElementById("multi-input")
    : document.getElementById("main-input");
}

async function paste() {
  const text = await navigator.clipboard.readText();
  if (!text.includes("tiktok")) return alert("No TikTok link found");
  getInput().value = text;
  toggleBtns();
}

function clearInput() {
  getInput().value = "";
  toggleBtns();
}

function extractUsername(text) {
  if (text.startsWith("@")) return text.replace("@","");
  try {
    const u = new URL(text);
    return u.pathname.split("/")[1].replace("@","");
  } catch {
    return null;
  }
}

function go(target) {
  const val = getInput().value.trim();
  if (!val) return alert("Paste a link first");

  if (activeTab === 1) {
    const user = extractUsername(val);
    if (!user) return alert("Invalid profile");
    location.href = "profile.html?username=" + encodeURIComponent(user);
    return;
  }

  location.href = target + "?links=" + encodeURIComponent(val);
}
</script>

</body>
</html>

