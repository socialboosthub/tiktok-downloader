<!DOCTYPE html>
<html>
<head>
  <title>Download</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body style="text-align:center;font-family:sans-serif">

<h3>Your Video</h3>

<img id="thumb"
     style="width:95%;border-radius:12px"
     alt="Thumbnail">

<br><br>

<button id="btn"
        style="padding:14px 28px;font-size:16px">
Download Video
</button>

<script>
const params = new URLSearchParams(location.search);
const tiktokUrl = params.get("url");

async function load() {
  const r = await fetch(`/api?url=${encodeURIComponent(tiktokUrl)}`);
  const j = await r.json();

  // ðŸ”¥ STATIC IMAGE ONLY (NO VIDEO PREVIEW)
  const img =
    j.data.origin_cover ||
    j.data.dynamic_cover ||
    j.data.cover;

  document.getElementById("thumb").src = img;

  const video = j.data.play;

  document.getElementById("btn").onclick = () => {
    location.href = `/download?url=${encodeURIComponent(video)}`;
  };
}

load();
</script>

</body>
</html>
